{
    "apps": [
        {
            "name": "production",
            "script": "/home/site/dist/src/main.js",
            "max_memory_restart": "500M",
            "autorestart": true,
            "env": {
                "NODE_ENV": "production",
                "ENVIRONMENT": "Production",
                "TYPEORM_DATABASE": "EggParty"
            }
        },
        {
            "name": "development",
            "script": "/home/site_dev/dist/src/main.js",
            "max_memory_restart": "250M",
            "autorestart": true,
            "env": {
                "NODE_ENV": "development",
                "ENVIRONMENT": "Development",
                "TYPEORM_DATABASE": "EggPartyDev"
            }
        }
    ],
    "deploy": {
        "production": {
            "user": "ci_agent",
            "host": "egg-party.com",
            "ref": "origin/master",
            "repo": "https://github.com/cakekindel/egg-party.git",
            "path": "/home/site",
            "post-deploy": "npm ci &&\nnpm build &&\ncopyfiles --up 1 './dist/**/*.js' ./www/production &&\npm2 reload pm2.config.yml production\n"
        },
        "development": {
            "user": "ci_agent",
            "host": "egg-party.com",
            "ref": "origin/master",
            "path": "/home/site_dev",
            "setup": "apt-get install git; sudo snap install node --channel=12; npm i -g pm2;",
            "post-deploy": "./.scripts/postdeploy.sh",
            "repo": "https://github.com/cakekindel/egg-party.git"
        }
    }
}
